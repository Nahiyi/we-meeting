import{d as h,r as f,a as b,c as y,b as t,e as r,w as l,f as d,g as u,m as N,i as R,l as g,h as _,j as P,E,k as q,o as z}from"./index-DSboVXbR.js";import{C as U}from"./CheckCode-QrC1tmKl.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"register-page"},M={class:"register-card"},j={class:"check-code-row"},I={class:"register-footer"},T=h({__name:"Register",setup(A){const k=q(),m=f(),c=f(),p=f(!1),o=b({email:"",nickName:"",password:"",confirmPassword:"",checkCode:""}),w={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{max:20,message:"昵称最长20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{max:20,message:"密码最长20个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(n,e,a)=>{e!==o.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],checkCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]};async function C(){var n,e;if(m.value){await m.value.validate(),p.value=!0;try{await P({email:o.email,nickName:o.nickName,password:o.password,checkCode:o.checkCode,checkCodeKey:((n=c.value)==null?void 0:n.checkCodeKey)||""}),E.success("注册成功，请登录"),k.push("/login")}catch{(e=c.value)==null||e.refresh()}finally{p.value=!1}}}return(n,e)=>{const a=d("el-input"),i=d("el-form-item"),v=d("el-button"),V=d("el-form"),x=d("router-link");return z(),y("div",K,[t("div",M,[e[8]||(e[8]=t("div",{class:"register-logo"},[t("span",{class:"logo-mark"},"E"),t("span",{class:"logo-text"},"EasyMeeting")],-1)),r(V,{ref_key:"formRef",ref:m,model:o,rules:w,class:"register-form"},{default:l(()=>[r(i,{prop:"email"},{default:l(()=>[r(a,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),placeholder:"邮箱",size:"large","prefix-icon":u(N)},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"nickName"},{default:l(()=>[r(a,{modelValue:o.nickName,"onUpdate:modelValue":e[1]||(e[1]=s=>o.nickName=s),placeholder:"昵称",size:"large","prefix-icon":u(R)},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"password"},{default:l(()=>[r(a,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=s=>o.password=s),type:"password",placeholder:"密码",size:"large","prefix-icon":u(g),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"confirmPassword"},{default:l(()=>[r(a,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.confirmPassword=s),type:"password",placeholder:"确认密码",size:"large","prefix-icon":u(g),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"checkCode"},{default:l(()=>[t("div",j,[r(a,{modelValue:o.checkCode,"onUpdate:modelValue":e[4]||(e[4]=s=>o.checkCode=s),placeholder:"验证码",size:"large"},null,8,["modelValue"]),r(U,{ref_key:"checkCodeRef",ref:c},null,512)])]),_:1}),r(i,null,{default:l(()=>[r(v,{class:"register-btn",loading:p.value,onClick:C},{default:l(()=>[...e[5]||(e[5]=[_(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",I,[e[7]||(e[7]=t("span",null,"已有账号？",-1)),r(x,{to:"/login",class:"login-link"},{default:l(()=>[...e[6]||(e[6]=[_("立即登录",-1)])]),_:1})])])])}}}),J=B(T,[["__scopeId","data-v-0a0f402c"]]);export{J as default};
