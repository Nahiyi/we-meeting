import{d as h,u as x,r as p,a as y,c as b,b as s,e as o,w as a,f as t,o as E,g as f,m as R,l as U,h as g,E as q}from"./index-DSboVXbR.js";import{C as z}from"./CheckCode-QrC1tmKl.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"login-page"},N={class:"login-card"},M={class:"check-code-row"},S={class:"login-footer"},I=h({__name:"Login",setup(K){const _=x(),d=p(),i=p(),u=p(!1),l=y({email:"",password:"",checkCode:""}),k={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],checkCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]};async function v(){var c,e;if(d.value){await d.value.validate(),u.value=!0;try{await _.login(l.email,l.password,l.checkCode,((c=i.value)==null?void 0:c.checkCodeKey)||""),q.success("登录成功")}catch{(e=i.value)==null||e.refresh()}finally{u.value=!1}}}return(c,e)=>{const m=t("el-input"),n=t("el-form-item"),C=t("el-button"),w=t("el-form"),V=t("router-link");return E(),b("div",L,[s("div",N,[e[6]||(e[6]=s("div",{class:"login-logo"},[s("span",{class:"logo-mark"},"E"),s("span",{class:"logo-text"},"EasyMeeting")],-1)),o(w,{ref_key:"formRef",ref:d,model:l,rules:k,class:"login-form"},{default:a(()=>[o(n,{prop:"email"},{default:a(()=>[o(m,{modelValue:l.email,"onUpdate:modelValue":e[0]||(e[0]=r=>l.email=r),placeholder:"邮箱",size:"large","prefix-icon":f(R)},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{prop:"password"},{default:a(()=>[o(m,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=r=>l.password=r),type:"password",placeholder:"密码",size:"large","prefix-icon":f(U),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{prop:"checkCode"},{default:a(()=>[s("div",M,[o(m,{modelValue:l.checkCode,"onUpdate:modelValue":e[2]||(e[2]=r=>l.checkCode=r),placeholder:"验证码",size:"large"},null,8,["modelValue"]),o(z,{ref_key:"checkCodeRef",ref:i},null,512)])]),_:1}),o(n,null,{default:a(()=>[o(C,{class:"login-btn",loading:u.value,onClick:v},{default:a(()=>[...e[3]||(e[3]=[g(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),s("div",S,[e[5]||(e[5]=s("span",null,"还没有账号？",-1)),o(V,{to:"/register",class:"register-link"},{default:a(()=>[...e[4]||(e[4]=[g("立即注册",-1)])]),_:1})])])])}}}),D=B(I,[["__scopeId","data-v-7e6509ee"]]);export{D as default};
